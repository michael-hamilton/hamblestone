{"version":3,"sources":["projects/smb/lib/game/main.js"],"names":["ig","module","requires","defines","SuperMario","Game","extend","font","Font","location","init","input","bind","KEY","C","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","X","D","L","M","N","O","P","loadLevel","LevelLevel1_1","spawnEntity","EntityMario","name","gravity","update","player","getEntityByName","pos","x","screen","music","add","play","y","lives","state","pressed","console","log","game","system","setGame","parent","draw","coins","main"],"mappings":"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","file":"main.c30e363b.js","sourceRoot":"../pages","sourcesContent":["ig.module( \n\t'game.main' \n)\n.requires(\n\t'impact.game',\n\t'impact.font',\n\t'game.entities.mario',\n\t'game.entities.goomba',\n\t'game.levels.level1_1'\n/* \t'impact.debug.debug' */\n)\n.defines(function(){\n\nSuperMario = ig.Game.extend({\n\tfont: new ig.Font( 'media/04b03.font.png' ),\n\tlocation: 'overworld',\n\tinit: function() {\n\t\tig.input.bind( ig.KEY.C, 'up');\n\t\tig.input.bind( ig.KEY.DOWN_ARROW, 'down');\n\t\tig.input.bind( ig.KEY.LEFT_ARROW, 'left');\n\t\tig.input.bind( ig.KEY.RIGHT_ARROW, 'right');\n\t\tig.input.bind( ig.KEY.X, 'run');\t\n\t\t\n/* \t\tdebug inputs */\n\t\tig.input.bind( ig.KEY.D, 'debug');\n\t\tig.input.bind( ig.KEY.L, 'lives');\n\t\tig.input.bind( ig.KEY.M, 'spawn');\n\t\tig.input.bind( ig.KEY.N, 'reset');\n\t\tig.input.bind( ig.KEY.O, 'coins');\n\t\tig.input.bind( ig.KEY.P, 'pos');\n\t\n\t\t\n\t\tthis.loadLevel(LevelLevel1_1); \n\t\tthis.spawnEntity(EntityMario,40,208,{name:\"player\"});\n\t\tthis.gravity=900;\n\t\t\n\t},\n\t\n\tupdate: function() {\n\t\tvar player=this.getEntityByName(\"player\");\n\t\tthis.location=player.location;\n\t\t\n\t\tif((player.pos.x>120 && player.pos.x<3264)){\n\t\t\tthis.screen.x=player.pos.x-120;\n\t\t}\n\t\t\n\t\tif(this.location=='underworld'){\n\t\t\tig.music.add('media/mario/music/underworld.ogg', 'underworld');\n\t\t\tig.music.play('underworld');\n\t\t\tthis.screen.y=256;\n\t\t}\n\t\tif(this.location=='overworld'){\n\t\t\tif(player.pos.y>240){\n\t\t\t\tthis.lives--;\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tig.music.add('media/mario/music/overworld.ogg', 'overworld');\n\t\t\t\tig.music.play('overworld');\n\t\t\t\tthis.screen.y=0;\n\t\t\t}\n\t\t}\n\t\t\n/* \t\tdebugging commands */\n\t\tif(ig.input.state('debug')){\n\t\t\tif(ig.input.pressed('pos')){\n\t\t\t\tconsole.log(\"mario [pos{x:\"+player.pos.x+\", y:\"+player.pos.y+\"}]\");\n\t\t\t}\n\t\t\tif(ig.input.pressed('spawn')){\n\t\t\t\tig.game.spawnEntity(EntityMario,player.pos.x,0);\n\t\t\t}\n\t\t\tif(ig.input.pressed('reset')){\n\t\t\t\tig.system.setGame(SuperMario);\n\t\t\t}\n\t\t}\n\t\tthis.parent();\n\n\t},\n\t\n\tdraw: function() {\n\t\tvar player=this.getEntityByName(\"player\");\n\t\tthis.parent();\n\t\tthis.font.draw(\"coins: \"+player.coins,10,10);\n\t\tthis.font.draw(\"lives: \"+player.lives,80,10);\n\t},\n});\n\n\nig.main( '#canvas', SuperMario, 60, 256, 245, 2 );\n\n});\n"]}